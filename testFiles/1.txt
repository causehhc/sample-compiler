import os
import sys

from PyQt5 import QtWidgets, QtGui
from PyQt5.QtCore import Qt
from PyQt5.QtWidgets import QApplication, QMainWindow, QCompleter
from ui import Ui_MainWindow


class MyMainForm(QMainWindow, Ui_MainWindow):
    def __init__(self, parent=None):
        super().__init__(parent)
        self.setupUi(self)

        self.actionOpen.triggered.connect(self.open_file)
        self.actionSave.triggered.connect(self.save_file)

    def open_file(self):
        fileName, fileType = QtWidgets.QFileDialog.getOpenFileName(self, "打开文件", os.getcwd(),
                                                                   "All Files(*);;Text Files(*.txt)")
        fileContent = open(fileName, 'r').read()
        self.textEditMain.setPlainText(fileContent)

    def save_file(self):
        fileName, filetype = QtWidgets.QFileDialog.getSaveFileName(self, "保存文件", os.getcwd(),
                                                                   "All Files (*);;Text Files (*.txt)")
        fileContent = self.textEditMain.toPlainText()
        open(fileName, 'w').write(fileContent)


if __name__ == '__main__':
    app = QApplication(sys.argv)
    my_win = MyMainForm()
    my_win.show()
    sys.exit(app.exec_())
